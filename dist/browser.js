(function(r,e){typeof exports=="object"&&typeof module<"u"?module.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self,r.ViewerjsWebcomponentGlobal=e())})(this,function(){"use strict";var __vite_style__=document.createElement("style");__vite_style__.textContent=`/*!
 * Viewer.js v1.11.7
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-11-24T04:32:14.526Z
 */.viewer-zoom-in:before,.viewer-zoom-out:before,.viewer-one-to-one:before,.viewer-reset:before,.viewer-prev:before,.viewer-play:before,.viewer-next:before,.viewer-rotate-left:before,.viewer-rotate-right:before,.viewer-flip-horizontal:before,.viewer-flip-vertical:before,.viewer-fullscreen:before,.viewer-fullscreen-exit:before,.viewer-close:before{background-image:url("data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 viewBox%3D%220 0 560 40%22%3E%3Cpath fill%3D%22%23fff%22 d%3D%22M49.6 17.9h20.2v3.9H49.6zm123.1 2 10.9-11 2.7 2.8-8.2 8.2 8.2 8.2-2.7 2.7-10.9-10.9zm94 0-10.8-11-2.7 2.8 8.1 8.2-8.1 8.2 2.7 2.7 10.8-10.9zM212 9.3l20.1 10.6L212 30.5V9.3zm161.5 4.6-7.2 6 7.2 5.9v-4h12.4v4l7.3-5.9-7.3-6v4h-12.4v-4zm40.2 12.3 5.9 7.2 5.9-7.2h-4V13.6h4l-5.9-7.3-5.9 7.3h4v12.6h-4zm35.9-16.5h6.3v2h-4.3V16h-2V9.7Zm14 0h6.2V16h-2v-4.3h-4.2v-2Zm6.2 14V30h-6.2v-2h4.2v-4.3h2Zm-14 6.3h-6.2v-6.3h2v4.4h4.3v2Zm-438 .1v-8.3H9.6v-3.9h8.2V9.7h3.9v8.2h8.1v3.9h-8.1v8.3h-3.9zM93.6 9.7h-5.8v3.9h2V30h3.8V9.7zm16.1 0h-5.8v3.9h1.9V30h3.9V9.7zm-11.9 4.1h3.9v3.9h-3.9zm0 8.2h3.9v3.9h-3.9zm244.6-11.7 7.2 5.9-7.2 6v-3.6c-5.4-.4-7.8.8-8.7 2.8-.8 1.7-1.8 4.9 2.8 8.2-6.3-2-7.5-6.9-6-11.3 1.6-4.4 8-5 11.9-4.9v-3.1Zm147.2 13.4h6.3V30h-2v-4.3h-4.3v-2zm14 6.3v-6.3h6.2v2h-4.3V30h-1.9zm6.2-14h-6.2V9.7h1.9V14h4.3v2zm-13.9 0h-6.3v-2h4.3V9.7h2V16zm33.3 12.5 8.6-8.6-8.6-8.7 1.9-1.9 8.6 8.7 8.6-8.7 1.9 1.9-8.6 8.7 8.6 8.6-1.9 2-8.6-8.7-8.6 8.7-1.9-2zM297 10.3l-7.1 5.9 7.2 6v-3.6c5.3-.4 7.7.8 8.7 2.8.8 1.7 1.7 4.9-2.9 8.2 6.3-2 7.5-6.9 6-11.3-1.6-4.4-7.9-5-11.8-4.9v-3.1Zm-157.3-.6c2.3 0 4.4.7 6 2l2.5-3 1.9 9.2h-9.3l2.6-3.1a6.2 6.2 0 0 0-9.9 5.1c0 3.4 2.8 6.3 6.2 6.3 2.8 0 5.1-1.9 6-4.4h4c-1 4.7-5 8.3-10 8.3a10 10 0 0 1-10-10.2 10 10 0 0 1 10-10.2Z%22%2F%3E%3C%2Fsvg%3E");background-repeat:no-repeat;background-size:280px;color:transparent;display:block;font-size:0;height:20px;line-height:0;width:20px}.viewer-zoom-in:before{background-position:0 0;content:"Zoom In"}.viewer-zoom-out:before{background-position:-20px 0;content:"Zoom Out"}.viewer-one-to-one:before{background-position:-40px 0;content:"One to One"}.viewer-reset:before{background-position:-60px 0;content:"Reset"}.viewer-prev:before{background-position:-80px 0;content:"Previous"}.viewer-play:before{background-position:-100px 0;content:"Play"}.viewer-next:before{background-position:-120px 0;content:"Next"}.viewer-rotate-left:before{background-position:-140px 0;content:"Rotate Left"}.viewer-rotate-right:before{background-position:-160px 0;content:"Rotate Right"}.viewer-flip-horizontal:before{background-position:-180px 0;content:"Flip Horizontal"}.viewer-flip-vertical:before{background-position:-200px 0;content:"Flip Vertical"}.viewer-fullscreen:before{background-position:-220px 0;content:"Enter Full Screen"}.viewer-fullscreen-exit:before{background-position:-240px 0;content:"Exit Full Screen"}.viewer-close:before{background-position:-260px 0;content:"Close"}.viewer-container{bottom:0;direction:ltr;font-size:0;left:0;line-height:0;overflow:hidden;position:absolute;right:0;-webkit-tap-highlight-color:transparent;top:0;-ms-touch-action:none;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.viewer-container::-moz-selection,.viewer-container *::-moz-selection{background-color:transparent}.viewer-container::selection,.viewer-container *::selection{background-color:transparent}.viewer-container:focus{outline:0}.viewer-container img{display:block;height:auto;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.viewer-canvas{bottom:0;left:0;overflow:hidden;position:absolute;right:0;top:0}.viewer-canvas>img{height:auto;margin:15px auto;max-width:90%!important;width:auto}.viewer-footer{bottom:0;left:0;overflow:hidden;position:absolute;right:0;text-align:center}.viewer-navbar{background-color:#00000080;overflow:hidden}.viewer-list{box-sizing:content-box;height:50px;margin:0;overflow:hidden;padding:1px 0}.viewer-list>li{color:transparent;cursor:pointer;float:left;font-size:0;height:50px;line-height:0;opacity:.5;overflow:hidden;transition:opacity .15s;width:30px}.viewer-list>li:focus,.viewer-list>li:hover{opacity:.75}.viewer-list>li:focus{outline:0}.viewer-list>li+li{margin-left:1px}.viewer-list>.viewer-loading{position:relative}.viewer-list>.viewer-loading:after{border-width:2px;height:20px;margin-left:-10px;margin-top:-10px;width:20px}.viewer-list>.viewer-active,.viewer-list>.viewer-active:focus,.viewer-list>.viewer-active:hover{opacity:1}.viewer-player{background-color:#000;bottom:0;cursor:none;display:none;left:0;position:absolute;right:0;top:0;z-index:1}.viewer-player>img{left:0;position:absolute;top:0}.viewer-toolbar>ul{display:inline-block;margin:0 auto 5px;overflow:hidden;padding:6px 3px}.viewer-toolbar>ul>li{background-color:#00000080;border-radius:50%;cursor:pointer;float:left;height:24px;overflow:hidden;transition:background-color .15s;width:24px}.viewer-toolbar>ul>li:focus,.viewer-toolbar>ul>li:hover{background-color:#000c}.viewer-toolbar>ul>li:focus{box-shadow:0 0 3px #fff;outline:0;position:relative;z-index:1}.viewer-toolbar>ul>li:before{margin:2px}.viewer-toolbar>ul>li+li{margin-left:1px}.viewer-toolbar>ul>.viewer-small{height:18px;margin-bottom:3px;margin-top:3px;width:18px}.viewer-toolbar>ul>.viewer-small:before{margin:-1px}.viewer-toolbar>ul>.viewer-large{height:30px;margin-bottom:-3px;margin-top:-3px;width:30px}.viewer-toolbar>ul>.viewer-large:before{margin:5px}.viewer-tooltip{background-color:#000c;border-radius:10px;color:#fff;display:none;font-size:12px;height:20px;left:50%;line-height:20px;margin-left:-25px;margin-top:-10px;position:absolute;text-align:center;top:50%;width:50px}.viewer-title{color:#ccc;display:inline-block;font-size:12px;line-height:1.2;margin:5px 5%;max-width:90%;min-height:14px;opacity:.8;overflow:hidden;text-overflow:ellipsis;transition:opacity .15s;white-space:nowrap}.viewer-title:hover{opacity:1}.viewer-button{-webkit-app-region:no-drag;background-color:#00000080;border-radius:50%;cursor:pointer;height:80px;overflow:hidden;position:absolute;right:-40px;top:-40px;transition:background-color .15s;width:80px}.viewer-button:focus,.viewer-button:hover{background-color:#000c}.viewer-button:focus{box-shadow:0 0 3px #fff;outline:0}.viewer-button:before{bottom:15px;left:15px;position:absolute}.viewer-fixed{position:fixed}.viewer-open{overflow:hidden}.viewer-show{display:block}.viewer-hide{display:none}.viewer-backdrop{background-color:#00000080}.viewer-invisible{visibility:hidden}.viewer-move{cursor:move;cursor:grab}.viewer-fade{opacity:0}.viewer-in{opacity:1}.viewer-transition{transition:all .3s}@keyframes viewer-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.viewer-loading:after{animation:viewer-spinner 1s linear infinite;border:4px solid rgba(255,255,255,.1);border-left-color:#ffffff80;border-radius:50%;content:"";display:inline-block;height:40px;left:50%;margin-left:-20px;margin-top:-20px;position:absolute;top:50%;width:40px;z-index:1}@media (max-width: 767px){.viewer-hide-xs-down{display:none}}@media (max-width: 991px){.viewer-hide-sm-down{display:none}}@media (max-width: 1199px){.viewer-hide-md-down{display:none}}.container{display:grid;grid-template-columns:repeat(3,33.33%);grid-template-rows:1fr 1fr auto}.container img{width:100%;height:100%;max-height:100%}
/*$vite$:1*/`,document.head.appendChild(__vite_style__);/*!
 * Viewer.js v1.11.7
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-11-24T04:32:19.116Z
 */function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,_toPropertyKey(t.key),t)}}function _createClass(r,e,n){return e&&_defineProperties(r.prototype,e),n&&_defineProperties(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function _defineProperty(r,e,n){return(e=_toPropertyKey(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ownKeys(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,t)}return n}function _objectSpread2(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function _toPrimitive(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function _toPropertyKey(r){var e=_toPrimitive(r,"string");return typeof e=="symbol"?e:e+""}function _typeof(r){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(r)}var DEFAULTS={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},TEMPLATE='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=IS_BROWSER&&WINDOW.document.documentElement?"ontouchstart"in WINDOW.document.documentElement:!1,HAS_POINTER_EVENT=IS_BROWSER?"PointerEvent"in WINDOW:!1,NAMESPACE="viewer",ACTION_MOVE="move",ACTION_SWITCH="switch",ACTION_ZOOM="zoom",CLASS_ACTIVE="".concat(NAMESPACE,"-active"),CLASS_CLOSE="".concat(NAMESPACE,"-close"),CLASS_FADE="".concat(NAMESPACE,"-fade"),CLASS_FIXED="".concat(NAMESPACE,"-fixed"),CLASS_FULLSCREEN="".concat(NAMESPACE,"-fullscreen"),CLASS_FULLSCREEN_EXIT="".concat(NAMESPACE,"-fullscreen-exit"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_HIDE_MD_DOWN="".concat(NAMESPACE,"-hide-md-down"),CLASS_HIDE_SM_DOWN="".concat(NAMESPACE,"-hide-sm-down"),CLASS_HIDE_XS_DOWN="".concat(NAMESPACE,"-hide-xs-down"),CLASS_IN="".concat(NAMESPACE,"-in"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_LOADING="".concat(NAMESPACE,"-loading"),CLASS_MOVE="".concat(NAMESPACE,"-move"),CLASS_OPEN="".concat(NAMESPACE,"-open"),CLASS_SHOW="".concat(NAMESPACE,"-show"),CLASS_TRANSITION="".concat(NAMESPACE,"-transition"),EVENT_CLICK="click",EVENT_DBLCLICK="dblclick",EVENT_DRAG_START="dragstart",EVENT_FOCUSIN="focusin",EVENT_KEY_DOWN="keydown",EVENT_LOAD="load",EVENT_ERROR="error",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_RESIZE="resize",EVENT_TRANSITION_END="transitionend",EVENT_WHEEL="wheel",EVENT_READY="ready",EVENT_SHOW="show",EVENT_SHOWN="shown",EVENT_HIDE="hide",EVENT_HIDDEN="hidden",EVENT_VIEW="view",EVENT_VIEWED="viewed",EVENT_MOVE="move",EVENT_MOVED="moved",EVENT_ROTATE="rotate",EVENT_ROTATED="rotated",EVENT_SCALE="scale",EVENT_SCALED="scaled",EVENT_ZOOM="zoom",EVENT_ZOOMED="zoomed",EVENT_PLAY="play",EVENT_STOP="stop",DATA_ACTION="".concat(NAMESPACE,"Action"),REGEXP_SPACES=/\s\s*/,BUTTONS=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function isString(r){return typeof r=="string"}var isNaN=Number.isNaN||WINDOW.isNaN;function isNumber(r){return typeof r=="number"&&!isNaN(r)}function isUndefined(r){return typeof r>"u"}function isObject(r){return _typeof(r)==="object"&&r!==null}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(r){if(!isObject(r))return!1;try{var e=r.constructor,n=e.prototype;return e&&n&&hasOwnProperty.call(n,"isPrototypeOf")}catch{return!1}}function isFunction(r){return typeof r=="function"}function forEach(r,e){if(r&&isFunction(e))if(Array.isArray(r)||isNumber(r.length)){var n=r.length,t;for(t=0;t<n&&e.call(r,r[t],t,r)!==!1;t+=1);}else isObject(r)&&Object.keys(r).forEach(function(s){e.call(r,r[s],s,r)});return r}var assign=Object.assign||function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),s=1;s<n;s++)t[s-1]=arguments[s];return isObject(e)&&t.length>0&&t.forEach(function(a){isObject(a)&&Object.keys(a).forEach(function(o){e[o]=a[o]})}),e},REGEXP_SUFFIX=/^(?:width|height|left|top|marginLeft|marginTop)$/;function setStyle(r,e){var n=r.style;forEach(e,function(t,s){REGEXP_SUFFIX.test(s)&&isNumber(t)&&(t+="px"),n[s]=t})}function escapeHTMLEntities(r){return isString(r)?r.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):r}function hasClass(r,e){return!r||!e?!1:r.classList?r.classList.contains(e):r.className.indexOf(e)>-1}function addClass(r,e){if(!(!r||!e)){if(isNumber(r.length)){forEach(r,function(t){addClass(t,e)});return}if(r.classList){r.classList.add(e);return}var n=r.className.trim();n?n.indexOf(e)<0&&(r.className="".concat(n," ").concat(e)):r.className=e}}function removeClass(r,e){if(!(!r||!e)){if(isNumber(r.length)){forEach(r,function(n){removeClass(n,e)});return}if(r.classList){r.classList.remove(e);return}r.className.indexOf(e)>=0&&(r.className=r.className.replace(e,""))}}function toggleClass(r,e,n){if(e){if(isNumber(r.length)){forEach(r,function(t){toggleClass(t,e,n)});return}n?addClass(r,e):removeClass(r,e)}}var REGEXP_HYPHENATE=/([a-z\d])([A-Z])/g;function hyphenate(r){return r.replace(REGEXP_HYPHENATE,"$1-$2").toLowerCase()}function getData(r,e){return isObject(r[e])?r[e]:r.dataset?r.dataset[e]:r.getAttribute("data-".concat(hyphenate(e)))}function setData(r,e,n){isObject(n)?r[e]=n:r.dataset?r.dataset[e]=n:r.setAttribute("data-".concat(hyphenate(e)),n)}var onceSupported=function(){var r=!1;if(IS_BROWSER){var e=!1,n=function(){},t=Object.defineProperty({},"once",{get:function(){return r=!0,e},set:function(a){e=a}});WINDOW.addEventListener("test",n,t),WINDOW.removeEventListener("test",n,t)}return r}();function removeListener(r,e,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n;e.trim().split(REGEXP_SPACES).forEach(function(a){if(!onceSupported){var o=r.listeners;o&&o[a]&&o[a][n]&&(s=o[a][n],delete o[a][n],Object.keys(o[a]).length===0&&delete o[a],Object.keys(o).length===0&&delete r.listeners)}r.removeEventListener(a,s,t)})}function addListener(r,e,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n;e.trim().split(REGEXP_SPACES).forEach(function(a){if(t.once&&!onceSupported){var o=r.listeners,h=o===void 0?{}:o;s=function(){delete h[a][n],r.removeEventListener(a,s,t);for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];n.apply(r,l)},h[a]||(h[a]={}),h[a][n]&&r.removeEventListener(a,h[a][n],t),h[a][n]=s,r.listeners=h}r.addEventListener(a,s,t)})}function dispatchEvent(r,e,n,t){var s;return isFunction(Event)&&isFunction(CustomEvent)?s=new CustomEvent(e,_objectSpread2({bubbles:!0,cancelable:!0,detail:n},t)):(s=document.createEvent("CustomEvent"),s.initCustomEvent(e,!0,!0,n)),r.dispatchEvent(s)}function getOffset(r){var e=r.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function getTransforms(r){var e=r.rotate,n=r.scaleX,t=r.scaleY,s=r.translateX,a=r.translateY,o=[];isNumber(s)&&s!==0&&o.push("translateX(".concat(s,"px)")),isNumber(a)&&a!==0&&o.push("translateY(".concat(a,"px)")),isNumber(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),isNumber(n)&&n!==1&&o.push("scaleX(".concat(n,")")),isNumber(t)&&t!==1&&o.push("scaleY(".concat(t,")"));var h=o.length?o.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function getImageNameFromURL(r){return isString(r)?decodeURIComponent(r.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var IS_SAFARI=WINDOW.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(WINDOW.navigator.userAgent);function getImageNaturalSizes(r,e,n){var t=document.createElement("img");if(r.naturalWidth&&!IS_SAFARI)return n(r.naturalWidth,r.naturalHeight),t;var s=document.body||document.documentElement;return t.onload=function(){n(t.width,t.height),IS_SAFARI||s.removeChild(t)},forEach(e.inheritedAttributes,function(a){var o=r.getAttribute(a);o!==null&&t.setAttribute(a,o)}),t.src=r.src,IS_SAFARI||(t.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(t)),t}function getResponsiveClass(r){switch(r){case 2:return CLASS_HIDE_XS_DOWN;case 3:return CLASS_HIDE_SM_DOWN;case 4:return CLASS_HIDE_MD_DOWN;default:return""}}function getMaxZoomRatio(r){var e=_objectSpread2({},r),n=[];return forEach(r,function(t,s){delete e[s],forEach(e,function(a){var o=Math.abs(t.startX-a.startX),h=Math.abs(t.startY-a.startY),u=Math.abs(t.endX-a.endX),c=Math.abs(t.endY-a.endY),l=Math.sqrt(o*o+h*h),d=Math.sqrt(u*u+c*c),f=(d-l)/l;n.push(f)})}),n.sort(function(t,s){return Math.abs(t)<Math.abs(s)}),n[0]}function getPointer(r,e){var n=r.pageX,t=r.pageY,s={endX:n,endY:t};return e?s:_objectSpread2({timeStamp:Date.now(),startX:n,startY:t},s)}function getPointersCenter(r){var e=0,n=0,t=0;return forEach(r,function(s){var a=s.startX,o=s.startY;e+=a,n+=o,t+=1}),e/=t,n/=t,{pageX:e,pageY:n}}var render={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,n=e.body||e.documentElement;this.body=n,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=n.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(n).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,n=this.parent,t;e.inline&&(t={width:Math.max(n.offsetWidth,e.minWidth),height:Math.max(n.offsetHeight,e.minHeight)},this.parentData=t),(this.fulled||!t)&&(t=this.containerData),this.viewerData=assign({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&setStyle(this.viewer,this.viewerData)},initList:function(){var e=this,n=this.element,t=this.options,s=this.list,a=[];s.innerHTML="",forEach(this.images,function(o,h){var u=o.src,c=o.alt||getImageNameFromURL(u),l=e.getImageURL(o);if(u||l){var d=document.createElement("li"),f=document.createElement("img");forEach(t.inheritedAttributes,function(p){var g=o.getAttribute(p);g!==null&&f.setAttribute(p,g)}),t.navbar&&(f.src=u||l),f.alt=c,f.setAttribute("data-original-url",l||u),d.setAttribute("data-index",h),d.setAttribute("data-viewer-action","view"),d.setAttribute("role","button"),t.keyboard&&d.setAttribute("tabindex",0),d.appendChild(f),s.appendChild(d),a.push(d)}}),this.items=a,forEach(a,function(o){var h=o.firstElementChild,u,c;setData(h,"filled",!0),t.loading&&addClass(o,CLASS_LOADING),addListener(h,EVENT_LOAD,u=function(d){removeListener(h,EVENT_ERROR,c),t.loading&&removeClass(o,CLASS_LOADING),e.loadImage(d)},{once:!0}),addListener(h,EVENT_ERROR,c=function(){removeListener(h,EVENT_LOAD,u),t.loading&&removeClass(o,CLASS_LOADING)},{once:!0})}),t.transition&&addListener(n,EVENT_VIEWED,function(){addClass(s,CLASS_TRANSITION)},{once:!0})},renderList:function(){var e=this.index,n=this.items[e];if(n){var t=n.nextElementSibling,s=parseInt(window.getComputedStyle(t||n).marginLeft,10),a=n.offsetWidth,o=a+s;setStyle(this.list,assign({width:o*this.length-s},getTransforms({translateX:(this.viewerData.width-a)/2-o*e})))}},resetList:function(){var e=this.list;e.innerHTML="",removeClass(e,CLASS_TRANSITION),setStyle(e,getTransforms({translateX:0}))},initImage:function(e){var n=this,t=this.options,s=this.image,a=this.viewerData,o=this.footer.offsetHeight,h=a.width,u=Math.max(a.height-o,o),c=this.imageData||{},l;this.imageInitializing={abort:function(){l.onload=null}},l=getImageNaturalSizes(s,t,function(d,f){var p=d/f,g=Math.max(0,Math.min(1,t.initialCoverage)),m=h,E=u;n.imageInitializing=!1,u*p>h?E=h/p:m=u*p,g=isNumber(g)?g:.9,m=Math.min(m*g,d),E=Math.min(E*g,f);var b=(h-m)/2,w=(u-E)/2,v={left:b,top:w,x:b,y:w,width:m,height:E,oldRatio:1,ratio:m/d,aspectRatio:p,naturalWidth:d,naturalHeight:f},N=assign({},v);t.rotatable&&(v.rotate=c.rotate||0,N.rotate=0),t.scalable&&(v.scaleX=c.scaleX||1,v.scaleY=c.scaleY||1,N.scaleX=1,N.scaleY=1),n.imageData=v,n.initialImageData=N,e&&e()})},renderImage:function(e){var n=this,t=this.image,s=this.imageData;if(setStyle(t,assign({width:s.width,height:s.height,marginLeft:s.x,marginTop:s.y},getTransforms(s))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&hasClass(t,CLASS_TRANSITION)){var a=function(){n.imageRendering=!1,e()};this.imageRendering={abort:function(){removeListener(t,EVENT_TRANSITION_END,a)}},addListener(t,EVENT_TRANSITION_END,a,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},events={bind:function(){var e=this.options,n=this.viewer,t=this.canvas,s=this.element.ownerDocument;addListener(n,EVENT_CLICK,this.onClick=this.click.bind(this)),addListener(n,EVENT_DRAG_START,this.onDragStart=this.dragstart.bind(this)),addListener(t,EVENT_POINTER_DOWN,this.onPointerDown=this.pointerdown.bind(this)),addListener(s,EVENT_POINTER_MOVE,this.onPointerMove=this.pointermove.bind(this)),addListener(s,EVENT_POINTER_UP,this.onPointerUp=this.pointerup.bind(this)),addListener(s,EVENT_KEY_DOWN,this.onKeyDown=this.keydown.bind(this)),addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&addListener(n,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&addListener(t,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,n=this.viewer,t=this.canvas,s=this.element.ownerDocument;removeListener(n,EVENT_CLICK,this.onClick),removeListener(n,EVENT_DRAG_START,this.onDragStart),removeListener(t,EVENT_POINTER_DOWN,this.onPointerDown),removeListener(s,EVENT_POINTER_MOVE,this.onPointerMove),removeListener(s,EVENT_POINTER_UP,this.onPointerUp),removeListener(s,EVENT_KEY_DOWN,this.onKeyDown),removeListener(window,EVENT_RESIZE,this.onResize),e.zoomable&&e.zoomOnWheel&&removeListener(n,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&removeListener(t,EVENT_DBLCLICK,this.onDblclick)}},handlers={click:function(e){var n=this.options,t=this.imageData,s=e.target,a=getData(s,DATA_ACTION);switch(!a&&s.localName==="img"&&s.parentElement.localName==="li"&&(s=s.parentElement,a=getData(s,DATA_ACTION)),IS_TOUCH_DEVICE&&e.isTrusted&&s===this.canvas&&clearTimeout(this.clickCanvasTimeout),a){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(getData(s,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-t.scaleX||-1);break;case"flip-vertical":this.scaleY(-t.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(IS_TOUCH_DEVICE&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var n=this.element,t=this.options,s=this.image,a=this.index,o=this.viewerData;removeClass(s,CLASS_INVISIBLE),t.loading&&removeClass(this.canvas,CLASS_LOADING),s.style.cssText="height:0;"+"margin-left:".concat(o.width/2,"px;")+"margin-top:".concat(o.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){toggleClass(s,CLASS_MOVE,t.movable),toggleClass(s,CLASS_TRANSITION,t.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,isFunction(t.viewed)&&addListener(n,EVENT_VIEWED,t.viewed,{once:!0}),dispatchEvent(n,EVENT_VIEWED,{originalImage:e.images[a],index:a,image:s},{cancelable:!1})})})},loadImage:function(e){var n=e.target,t=n.parentNode,s=t.offsetWidth||30,a=t.offsetHeight||50,o=!!getData(n,"filled");getImageNaturalSizes(n,this.options,function(h,u){var c=h/u,l=s,d=a;a*c>s?o?l=a*c:d=s/c:o?d=s/c:l=a*c,setStyle(n,assign({width:l,height:d},getTransforms({translateX:(s-l)/2,translateY:(a-d)/2})))})},keydown:function(e){var n=this.options;if(n.keyboard){var t=e.keyCode||e.which||e.charCode;switch(t){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(t){case 27:this.played?this.stop():n.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(n.loop);break;case 38:e.preventDefault(),this.zoom(n.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(n.loop);break;case 40:e.preventDefault(),this.zoom(-n.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var n=this.options,t=this.pointers,s=e.buttons,a=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(isNumber(s)&&s!==1||isNumber(a)&&a!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?forEach(e.changedTouches,function(h){t[h.identifier]=getPointer(h)}):t[e.pointerId||0]=getPointer(e);var o=n.movable?ACTION_MOVE:!1;n.zoomOnTouch&&n.zoomable&&Object.keys(t).length>1?o=ACTION_ZOOM:n.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(o=ACTION_SWITCH),n.transition&&(o===ACTION_MOVE||o===ACTION_ZOOM)&&removeClass(this.image,CLASS_TRANSITION),this.action=o}},pointermove:function(e){var n=this.pointers,t=this.action;!this.viewed||!t||(e.preventDefault(),e.changedTouches?forEach(e.changedTouches,function(s){assign(n[s.identifier]||{},getPointer(s,!0))}):assign(n[e.pointerId||0]||{},getPointer(e,!0)),this.change(e))},pointerup:function(e){var n=this,t=this.options,s=this.action,a=this.pointers,o;e.changedTouches?forEach(e.changedTouches,function(h){o=a[h.identifier],delete a[h.identifier]}):(o=a[e.pointerId||0],delete a[e.pointerId||0]),s&&(e.preventDefault(),t.transition&&(s===ACTION_MOVE||s===ACTION_ZOOM)&&addClass(this.image,CLASS_TRANSITION),this.action=!1,IS_TOUCH_DEVICE&&s!==ACTION_ZOOM&&o&&Date.now()-o.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),t.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){dispatchEvent(n.image,EVENT_DBLCLICK,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){n.imageClicked=!1},500)):(this.imageClicked=!1,t.backdrop&&t.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){dispatchEvent(n.canvas,EVENT_CLICK,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}forEach(this.player.getElementsByTagName("img"),function(n){addListener(n,EVENT_LOAD,e.loadImage.bind(e),{once:!0}),dispatchEvent(n,EVENT_LOAD)})}},wheel:function(e){var n=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50);var t=Number(this.options.zoomRatio)||.1,s=1;e.deltaY?s=e.deltaY>0?1:-1:e.wheelDelta?s=-e.wheelDelta/120:e.detail&&(s=e.detail>0?1:-1),this.zoom(-s*t,!0,null,e)}}},methods={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.element,t=this.options;if(t.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(isFunction(t.show)&&addListener(n,EVENT_SHOW,t.show,{once:!0}),dispatchEvent(n,EVENT_SHOW)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var s=this.viewer;if(removeClass(s,CLASS_HIDE),s.setAttribute("role","dialog"),s.setAttribute("aria-labelledby",this.title.id),s.setAttribute("aria-modal",!0),s.removeAttribute("aria-hidden"),t.transition&&!e){var a=this.shown.bind(this);this.transitioning={abort:function(){removeListener(s,EVENT_TRANSITION_END,a),removeClass(s,CLASS_IN)}},addClass(s,CLASS_TRANSITION),s.initialOffsetWidth=s.offsetWidth,addListener(s,EVENT_TRANSITION_END,a,{once:!0}),addClass(s,CLASS_IN)}else addClass(s,CLASS_IN),this.shown();return this},hide:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.element,s=this.options;if(s.inline||this.hiding||!(this.isShown||this.showing))return this;if(isFunction(s.hide)&&addListener(t,EVENT_HIDE,s.hide,{once:!0}),dispatchEvent(t,EVENT_HIDE)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var a=this.viewer,o=this.image,h=function(){removeClass(a,CLASS_IN),e.hidden()};if(s.transition&&!n){var u=function(d){d&&d.target===a&&(removeListener(a,EVENT_TRANSITION_END,u),e.hidden())},c=function(){hasClass(a,CLASS_TRANSITION)?(addListener(a,EVENT_TRANSITION_END,u),removeClass(a,CLASS_IN)):h()};this.transitioning={abort:function(){e.viewed&&hasClass(o,CLASS_TRANSITION)?removeListener(o,EVENT_TRANSITION_END,c):hasClass(a,CLASS_TRANSITION)&&removeListener(a,EVENT_TRANSITION_END,u)}},this.viewed&&hasClass(o,CLASS_TRANSITION)?(addListener(o,EVENT_TRANSITION_END,c,{once:!0}),this.zoomTo(0,!1,null,null,!0)):c()}else h();return this},view:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(n=Number(n)||0,this.hiding||this.played||n<0||n>=this.length||this.viewed&&n===this.index)return this;if(!this.isShown)return this.index=n,this.show();this.viewing&&this.viewing.abort();var t=this.element,s=this.options,a=this.title,o=this.canvas,h=this.items[n],u=h.querySelector("img"),c=getData(u,"originalUrl"),l=u.getAttribute("alt"),d=document.createElement("img");if(forEach(s.inheritedAttributes,function(E){var b=u.getAttribute(E);b!==null&&d.setAttribute(E,b)}),d.src=c,d.alt=l,isFunction(s.view)&&addListener(t,EVENT_VIEW,s.view,{once:!0}),dispatchEvent(t,EVENT_VIEW,{originalImage:this.images[n],index:n,image:d})===!1||!this.isShown||this.hiding||this.played)return this;var f=this.items[this.index];f&&(removeClass(f,CLASS_ACTIVE),f.removeAttribute("aria-selected")),addClass(h,CLASS_ACTIVE),h.setAttribute("aria-selected",!0),s.focus&&h.focus(),this.image=d,this.viewed=!1,this.index=n,this.imageData={},addClass(d,CLASS_INVISIBLE),s.loading&&addClass(o,CLASS_LOADING),o.innerHTML="",o.appendChild(d),this.renderList(),a.innerHTML="";var p=function(){var b=e.imageData,w=Array.isArray(s.title)?s.title[1]:s.title;a.innerHTML=escapeHTMLEntities(isFunction(w)?w.call(e,d,b):"".concat(l," (").concat(b.naturalWidth," Ã— ").concat(b.naturalHeight,")"))},g,m;return addListener(t,EVENT_VIEWED,p,{once:!0}),this.viewing={abort:function(){removeListener(t,EVENT_VIEWED,p),d.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(d.src="",removeListener(d,EVENT_LOAD,g),e.timeout&&clearTimeout(e.timeout))}},d.complete?this.load():(addListener(d,EVENT_LOAD,g=function(){removeListener(d,EVENT_ERROR,m),e.load()},{once:!0}),addListener(d,EVENT_ERROR,m=function(){removeListener(d,EVENT_LOAD,g),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),removeClass(d,CLASS_INVISIBLE),s.loading&&removeClass(e.canvas,CLASS_LOADING)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){removeClass(d,CLASS_INVISIBLE),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.index-1;return n<0&&(n=e?this.length-1:0),this.view(n),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.length-1,t=this.index+1;return t>n&&(t=e?0:n),this.view(t),this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,t=this.imageData;return this.moveTo(isUndefined(e)?e:t.x+Number(e),isUndefined(n)?n:t.y+Number(n)),this},moveTo:function(e){var n=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=this.element,o=this.options,h=this.imageData;if(e=Number(e),t=Number(t),this.viewed&&!this.played&&o.movable){var u=h.x,c=h.y,l=!1;if(isNumber(e)?l=!0:e=u,isNumber(t)?l=!0:t=c,l){if(isFunction(o.move)&&addListener(a,EVENT_MOVE,o.move,{once:!0}),dispatchEvent(a,EVENT_MOVE,{x:e,y:t,oldX:u,oldY:c,originalEvent:s})===!1)return this;h.x=e,h.y=t,h.left=e,h.top=t,this.moving=!0,this.renderImage(function(){n.moving=!1,isFunction(o.moved)&&addListener(a,EVENT_MOVED,o.moved,{once:!0}),dispatchEvent(a,EVENT_MOVED,{x:e,y:t,oldX:u,oldY:c,originalEvent:s},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var n=this,t=this.element,s=this.options,a=this.imageData;if(e=Number(e),isNumber(e)&&this.viewed&&!this.played&&s.rotatable){var o=a.rotate;if(isFunction(s.rotate)&&addListener(t,EVENT_ROTATE,s.rotate,{once:!0}),dispatchEvent(t,EVENT_ROTATE,{degree:e,oldDegree:o})===!1)return this;a.rotate=e,this.rotating=!0,this.renderImage(function(){n.rotating=!1,isFunction(s.rotated)&&addListener(t,EVENT_ROTATED,s.rotated,{once:!0}),dispatchEvent(t,EVENT_ROTATED,{degree:e,oldDegree:o},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var n=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=this.element,a=this.options,o=this.imageData;if(e=Number(e),t=Number(t),this.viewed&&!this.played&&a.scalable){var h=o.scaleX,u=o.scaleY,c=!1;if(isNumber(e)?c=!0:e=h,isNumber(t)?c=!0:t=u,c){if(isFunction(a.scale)&&addListener(s,EVENT_SCALE,a.scale,{once:!0}),dispatchEvent(s,EVENT_SCALE,{scaleX:e,scaleY:t,oldScaleX:h,oldScaleY:u})===!1)return this;o.scaleX=e,o.scaleY=t,this.scaling=!0,this.renderImage(function(){n.scaling=!1,isFunction(a.scaled)&&addListener(s,EVENT_SCALED,a.scaled,{once:!0}),dispatchEvent(s,EVENT_SCALED,{scaleX:e,scaleY:t,oldScaleX:h,oldScaleY:u},{cancelable:!1})})}}return this},zoom:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(a.width*e/a.naturalWidth,n,t,s),this},zoomTo:function(e){var n=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,h=this.element,u=this.options,c=this.pointers,l=this.imageData,d=l.x,f=l.y,p=l.width,g=l.height,m=l.naturalWidth,E=l.naturalHeight;if(e=Math.max(0,e),isNumber(e)&&this.viewed&&!this.played&&(o||u.zoomable)){if(!o){var b=Math.max(.01,u.minZoomRatio),w=Math.min(100,u.maxZoomRatio);e=Math.min(Math.max(e,b),w)}if(a)switch(a.type){case"wheel":u.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var v=m*e,N=E*e,C=v-p,S=N-g,A=l.ratio;if(isFunction(u.zoom)&&addListener(h,EVENT_ZOOM,u.zoom,{once:!0}),dispatchEvent(h,EVENT_ZOOM,{ratio:e,oldRatio:A,originalEvent:a})===!1)return this;if(this.zooming=!0,a){var I=getOffset(this.viewer),_=c&&Object.keys(c).length>0?getPointersCenter(c):{pageX:a.pageX,pageY:a.pageY};l.x-=C*((_.pageX-I.left-d)/p),l.y-=S*((_.pageY-I.top-f)/g)}else isPlainObject(s)&&isNumber(s.x)&&isNumber(s.y)?(l.x-=C*((s.x-d)/p),l.y-=S*((s.y-f)/g)):(l.x-=C/2,l.y-=S/2);l.left=l.x,l.top=l.y,l.width=v,l.height=N,l.oldRatio=A,l.ratio=e,this.renderImage(function(){n.zooming=!1,isFunction(u.zoomed)&&addListener(h,EVENT_ZOOMED,u.zoomed,{once:!0}),dispatchEvent(h,EVENT_ZOOMED,{ratio:e,oldRatio:A,originalEvent:a},{cancelable:!1})}),t&&this.tooltip()}return this},play:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var t=this.element,s=this.options;if(isFunction(s.play)&&addListener(t,EVENT_PLAY,s.play,{once:!0}),dispatchEvent(t,EVENT_PLAY)===!1)return this;var a=this.player,o=this.loadImage.bind(this),h=[],u=0,c=0;if(this.played=!0,this.onLoadWhenPlay=o,n&&this.requestFullscreen(n),addClass(a,CLASS_SHOW),forEach(this.items,function(f,p){var g=f.querySelector("img"),m=document.createElement("img");m.src=getData(g,"originalUrl"),m.alt=g.getAttribute("alt"),m.referrerPolicy=g.referrerPolicy,u+=1,addClass(m,CLASS_FADE),toggleClass(m,CLASS_TRANSITION,s.transition),hasClass(f,CLASS_ACTIVE)&&(addClass(m,CLASS_IN),c=p),h.push(m),addListener(m,EVENT_LOAD,o,{once:!0}),a.appendChild(m)}),isNumber(s.interval)&&s.interval>0){var l=function(){clearTimeout(e.playing.timeout),removeClass(h[c],CLASS_IN),c-=1,c=c>=0?c:u-1,addClass(h[c],CLASS_IN),e.playing.timeout=setTimeout(l,s.interval)},d=function(){clearTimeout(e.playing.timeout),removeClass(h[c],CLASS_IN),c+=1,c=c<u?c:0,addClass(h[c],CLASS_IN),e.playing.timeout=setTimeout(d,s.interval)};u>1&&(this.playing={prev:l,next:d,timeout:setTimeout(d,s.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var n=this.element,t=this.options;if(isFunction(t.stop)&&addListener(n,EVENT_STOP,t.stop,{once:!0}),dispatchEvent(n,EVENT_STOP)===!1)return this;var s=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,forEach(s.getElementsByTagName("img"),function(a){removeListener(a,EVENT_LOAD,e.onLoadWhenPlay)}),removeClass(s,CLASS_SHOW),s.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,n=this.options,t=this.viewer,s=this.image,a=this.list;return!this.isShown||this.played||this.fulled||!n.inline?this:(this.fulled=!0,this.open(),addClass(this.button,CLASS_FULLSCREEN_EXIT),n.transition&&(removeClass(a,CLASS_TRANSITION),this.viewed&&removeClass(s,CLASS_TRANSITION)),addClass(t,CLASS_FIXED),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby",this.title.id),t.setAttribute("aria-modal",!0),t.removeAttribute("style"),setStyle(t,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=assign({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){addClass(s,CLASS_TRANSITION),addClass(a,CLASS_TRANSITION)},0)})}),this)},exit:function(){var e=this,n=this.options,t=this.viewer,s=this.image,a=this.list;return!this.isShown||this.played||!this.fulled||!n.inline?this:(this.fulled=!1,this.close(),removeClass(this.button,CLASS_FULLSCREEN_EXIT),n.transition&&(removeClass(a,CLASS_TRANSITION),this.viewed&&removeClass(s,CLASS_TRANSITION)),n.focus&&this.clearEnforceFocus(),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),removeClass(t,CLASS_FIXED),setStyle(t,{zIndex:n.zIndexInline}),this.viewerData=assign({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){addClass(s,CLASS_TRANSITION),addClass(a,CLASS_TRANSITION)},0)})}),this)},tooltip:function(){var e=this,n=this.options,t=this.tooltipBox,s=this.imageData;return!this.viewed||this.played||!n.tooltip?this:(t.textContent="".concat(Math.round(s.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):n.transition?(this.fading&&dispatchEvent(t,EVENT_TRANSITION_END),addClass(t,CLASS_SHOW),addClass(t,CLASS_FADE),addClass(t,CLASS_TRANSITION),t.removeAttribute("aria-hidden"),t.initialOffsetWidth=t.offsetWidth,addClass(t,CLASS_IN)):(addClass(t,CLASS_SHOW),t.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){n.transition?(addListener(t,EVENT_TRANSITION_END,function(){removeClass(t,CLASS_SHOW),removeClass(t,CLASS_FADE),removeClass(t,CLASS_TRANSITION),t.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),removeClass(t,CLASS_IN),e.fading=!0):(removeClass(t,CLASS_SHOW),t.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=assign({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,n=this.element,t=this.options,s=this.isImg;if(s&&!n.parentNode)return this.destroy();var a=[];if(forEach(s?[n]:n.querySelectorAll("img"),function(c){isFunction(t.filter)?t.filter.call(e,c)&&a.push(c):e.getImageURL(c)&&a.push(c)}),!a.length)return this;if(this.images=a,this.length=a.length,this.ready){var o=[];if(forEach(this.items,function(c,l){var d=c.querySelector("img"),f=a[l];f&&d?(f.src!==d.src||f.alt!==d.alt)&&o.push(l):o.push(l)}),setStyle(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var h=o.indexOf(this.index);if(h>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-h,this.length-1),0));else{var u=this.items[this.index];addClass(u,CLASS_ACTIVE),u.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,n=this.options;return e[NAMESPACE]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),n.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):n.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),n.inline||removeListener(e,EVENT_CLICK,this.onStart),e[NAMESPACE]=void 0,this):this}},others={getImageURL:function(e){var n=this.options.url;return isString(n)?n=e.getAttribute(n):isFunction(n)?n=n.call(this,e):n="",n},enforceFocus:function(){var e=this;this.clearEnforceFocus(),addListener(document,EVENT_FOCUSIN,this.onFocusin=function(n){var t=e.viewer,s=n.target;if(!(s===document||s===t||t.contains(s))){for(;s;){if(s.getAttribute("tabindex")!==null||s.getAttribute("aria-modal")==="true")return;s=s.parentElement}t.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(removeListener(document,EVENT_FOCUSIN,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;addClass(e,CLASS_OPEN),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;removeClass(e,CLASS_OPEN),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,n=this.options,t=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,n.focus&&(t.focus(),this.enforceFocus()),isFunction(n.shown)&&addListener(e,EVENT_SHOWN,n.shown,{once:!0}),dispatchEvent(e,EVENT_SHOWN)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,n=this.options,t=this.viewer;n.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),addClass(t,CLASS_HIDE),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),t.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(isFunction(n.hidden)&&addListener(e,EVENT_HIDDEN,n.hidden,{once:!0}),dispatchEvent(e,EVENT_HIDDEN,null,{cancelable:!1}))},requestFullscreen:function(e){var n=this.element.ownerDocument;if(this.fulled&&!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)){var t=n.documentElement;t.requestFullscreen?isPlainObject(e)?t.requestFullscreen(e):t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var n=this.options,t=this.pointers,s=t[Object.keys(t)[0]];if(s){var a=s.endX-s.startX,o=s.endY-s.startY;switch(this.action){case ACTION_MOVE:(a!==0||o!==0)&&(this.pointerMoved=!0,this.move(a,o,e));break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(t),!1,null,e);break;case ACTION_SWITCH:{this.action="switched";var h=Math.abs(a);h>1&&h>Math.abs(o)&&(this.pointers={},a>1?this.prev(n.loop):a<-1&&this.next(n.loop));break}}forEach(t,function(u){u.startX=u.endX,u.startY=u.endY})}},isSwitchable:function(){var e=this.imageData,n=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=n.width&&e.height<=n.height}},AnotherViewer=WINDOW.Viewer,getUniqueID=function(r){return function(){return r+=1,r}}(-1),Viewer=function(){function r(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,r),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=assign({},DEFAULTS,isPlainObject(n)&&n),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=getUniqueID(),this.init()}return _createClass(r,[{key:"init",value:function(){var n=this,t=this.element,s=this.options;if(!t[NAMESPACE]){t[NAMESPACE]=this,s.focus&&!s.keyboard&&(s.focus=!1);var a=t.localName==="img",o=[];if(forEach(a?[t]:t.querySelectorAll("img"),function(c){isFunction(s.filter)?s.filter.call(n,c)&&o.push(c):n.getImageURL(c)&&o.push(c)}),this.isImg=a,this.length=o.length,this.images=o,this.initBody(),isUndefined(document.createElement(NAMESPACE).style.transition)&&(s.transition=!1),s.inline){var h=0,u=function(){if(h+=1,h===n.length){var l;n.initializing=!1,n.delaying={abort:function(){clearTimeout(l)}},l=setTimeout(function(){n.delaying=!1,n.build()},0)}};this.initializing={abort:function(){forEach(o,function(l){l.complete||(removeListener(l,EVENT_LOAD,u),removeListener(l,EVENT_ERROR,u))})}},forEach(o,function(c){if(c.complete)u();else{var l,d;addListener(c,EVENT_LOAD,l=function(){removeListener(c,EVENT_ERROR,d),u()},{once:!0}),addListener(c,EVENT_ERROR,d=function(){removeListener(c,EVENT_LOAD,l),u()},{once:!0})}})}else addListener(t,EVENT_CLICK,this.onStart=function(c){var l=c.target;l.localName==="img"&&(!isFunction(s.filter)||s.filter.call(n,l))&&n.view(n.images.indexOf(l))})}}},{key:"build",value:function(){if(!this.ready){var n=this.element,t=this.options,s=n.parentNode,a=document.createElement("div");a.innerHTML=TEMPLATE;var o=a.querySelector(".".concat(NAMESPACE,"-container")),h=o.querySelector(".".concat(NAMESPACE,"-title")),u=o.querySelector(".".concat(NAMESPACE,"-toolbar")),c=o.querySelector(".".concat(NAMESPACE,"-navbar")),l=o.querySelector(".".concat(NAMESPACE,"-button")),d=o.querySelector(".".concat(NAMESPACE,"-canvas"));if(this.parent=s,this.viewer=o,this.title=h,this.toolbar=u,this.navbar=c,this.button=l,this.canvas=d,this.footer=o.querySelector(".".concat(NAMESPACE,"-footer")),this.tooltipBox=o.querySelector(".".concat(NAMESPACE,"-tooltip")),this.player=o.querySelector(".".concat(NAMESPACE,"-player")),this.list=o.querySelector(".".concat(NAMESPACE,"-list")),o.id="".concat(NAMESPACE).concat(this.id),h.id="".concat(NAMESPACE,"Title").concat(this.id),addClass(h,t.title?getResponsiveClass(Array.isArray(t.title)?t.title[0]:t.title):CLASS_HIDE),addClass(c,t.navbar?getResponsiveClass(t.navbar):CLASS_HIDE),toggleClass(l,CLASS_HIDE,!t.button),t.keyboard&&l.setAttribute("tabindex",0),t.backdrop&&(addClass(o,"".concat(NAMESPACE,"-backdrop")),!t.inline&&t.backdrop!=="static"&&setData(d,DATA_ACTION,"hide")),isString(t.className)&&t.className&&t.className.split(REGEXP_SPACES).forEach(function(v){addClass(o,v)}),t.toolbar){var f=document.createElement("ul"),p=isPlainObject(t.toolbar),g=BUTTONS.slice(0,3),m=BUTTONS.slice(7,9),E=BUTTONS.slice(9);p||addClass(u,getResponsiveClass(t.toolbar)),forEach(p?t.toolbar:BUTTONS,function(v,N){var C=p&&isPlainObject(v),S=p?hyphenate(N):v,A=C&&!isUndefined(v.show)?v.show:v;if(!(!A||!t.zoomable&&g.indexOf(S)!==-1||!t.rotatable&&m.indexOf(S)!==-1||!t.scalable&&E.indexOf(S)!==-1)){var I=C&&!isUndefined(v.size)?v.size:v,_=C&&!isUndefined(v.click)?v.click:v,T=document.createElement("li");t.keyboard&&T.setAttribute("tabindex",0),T.setAttribute("role","button"),addClass(T,"".concat(NAMESPACE,"-").concat(S)),isFunction(_)||setData(T,DATA_ACTION,S),isNumber(A)&&addClass(T,getResponsiveClass(A)),["small","large"].indexOf(I)!==-1?addClass(T,"".concat(NAMESPACE,"-").concat(I)):S==="play"&&addClass(T,"".concat(NAMESPACE,"-large")),isFunction(_)&&addListener(T,EVENT_CLICK,_),f.appendChild(T)}}),u.appendChild(f)}else addClass(u,CLASS_HIDE);if(!t.rotatable){var b=u.querySelectorAll('li[class*="rotate"]');addClass(b,CLASS_INVISIBLE),forEach(b,function(v){u.appendChild(v)})}if(t.inline)addClass(l,CLASS_FULLSCREEN),setStyle(o,{zIndex:t.zIndexInline}),window.getComputedStyle(s).position==="static"&&setStyle(s,{position:"relative"}),s.insertBefore(o,n.nextSibling);else{addClass(l,CLASS_CLOSE),addClass(o,CLASS_FIXED),addClass(o,CLASS_FADE),addClass(o,CLASS_HIDE),setStyle(o,{zIndex:t.zIndex});var w=t.container;isString(w)&&(w=n.ownerDocument.querySelector(w)),w||(w=this.body),w.appendChild(o)}if(t.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,isFunction(t.ready)&&addListener(n,EVENT_READY,t.ready,{once:!0}),dispatchEvent(n,EVENT_READY)===!1){this.ready=!1;return}this.ready&&t.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=AnotherViewer,r}},{key:"setDefaults",value:function(n){assign(DEFAULTS,isPlainObject(n)&&n)}}])}();assign(Viewer.prototype,render,events,handlers,methods,others);const styleStr="<style>.container {display: grid;grid-template-columns: repeat(3, 33.33%);grid-template-rows: 1fr 1fr auto;img {width: 100%;height: 100%;max-height: 100%;}}</style>",slotStr='<slot name="slotName"></slot>',innerTemplate='<div id="viewer-container" class="container"></div>'+styleStr+slotStr;class ViewerWebComponent extends HTMLElement{connectedCallback(){const template=document.createElement("template"),imageArr=this.getAttribute("images");template.innerHTML=this.imageCount(imageArr.split(","));const content=template.content.cloneNode(!0);this.appendChild(content);const options={};for(let i of this.attributes)!i.name.includes("-")&&i.name!=="images"&&(options[i.name]=eval(i.value));const viewer=new Viewer(document.getElementById("viewer-container"),options);getViewer.viewer=viewer}constructor(){super()}imageCount(r){const e=innerTemplate.split("</div>").filter(Boolean);if(r&&r.length)for(let n=0;n<r.length;n++)e.push(`<div><img src="${r[n]}" alt="${n+1}" title="${n+1}"></div>`);return e.join("")+"</div>"}}document.querySelector("viewer-webcomponent")||customElements.define("viewer-webcomponent",ViewerWebComponent);const getViewer=new Proxy({},{get(r,e){return console.log(`[get] ${e}`),r[e]},set(r,e,n){return console.log(`[set] ${e} =`,n),r[e]=n,!0}});return getViewer});
